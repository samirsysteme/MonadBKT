<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Breakout Game - Monad</title>
<style>
  canvas { background: #000; display: block; margin: 0 auto; }
  body {
    background: #111;
    color: #fff;
    text-align: center;
    font-family: Arial, sans-serif;
  }
  .info { margin-top: 10px; }
  #startButton {
    display: none;
    margin-top: 20px;
    padding: 10px 20px;
    background-color: #800080;
    color: white;
    font-size: 18px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
  }
  #startButton:hover { background-color: #a020a0; }
</style>
</head>
<body>

<h1>üéÆ MONAD¬Æ Breakout</h1>
<div class="info">
  üë®‚Äçüè´ The player: <strong>MonadBKT</strong> |
  üèÜ The result: <span id="score">0</span> |
  üî• Highest score: <span id="highScore">0</span>
</div>

<canvas id="gameCanvas" width="800" height="600"></canvas>
<button id="startButton" onclick="restartGame()">START</button>

<audio id="winSound" src="win.mp3" preload="auto"></audio>
<audio id="loseSound" src="lose.mp3" preload="auto"></audio>
<audio id="hitSound" src="hit.mp3" preload="auto"></audio>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
const startButton = document.getElementById("startButton");

const winSound = document.getElementById("winSound");
const loseSound = document.getElementById("loseSound");
const hitSound = document.getElementById("hitSound");

const paddleWidth = 100;
const paddleHeight = 10;
const paddleY = canvas.height - 30;
let paddleX = (canvas.width - paddleWidth) / 2;
const paddleSpeed = 8;

const ballRadius = 8;
let ballX = canvas.width / 2;
let ballY = canvas.height / 2;
let ballDX = 4;
let ballDY = -4;

const brickRowCount = 5;
const brickColumnCount = 10;
const brickWidth = 75;
const brickHeight = 20;
const brickPadding = 5;
const brickOffsetTop = 30;
const totalBricksWidth = brickColumnCount * brickWidth + (brickColumnCount - 1) * brickPadding;
const brickOffsetLeft = (canvas.width - totalBricksWidth) / 2;

let score = 0;
let highScore = localStorage.getItem("highScore") || 0;
document.getElementById("highScore").textContent = highScore;

let bricks = [];
function resetBricks() {
  bricks = [];
  for (let c = 0; c < brickColumnCount; c++) {
    bricks[c] = [];
    for (let r = 0; r < brickRowCount; r++) {
      bricks[c][r] = { x: 0, y: 0, status: 1 };
    }
  }
}
resetBricks();

document.addEventListener("keydown", keyDownHandler);
document.addEventListener("keyup", keyUpHandler);

let rightPressed = false;
let leftPressed = false;
let gameRunning = true;

function keyDownHandler(e) {
  if (e.key === "Right" || e.key === "ArrowRight") rightPressed = true;
  else if (e.key === "Left" || e.key === "ArrowLeft") leftPressed = true;
}
function keyUpHandler(e) {
  if (e.key === "Right" || e.key === "ArrowRight") rightPressed = false;
  else if (e.key === "Left" || e.key === "ArrowLeft") leftPressed = false;
}

function collisionDetection() {
  for (let c = 0; c < brickColumnCount; c++) {
    for (let r = 0; r < brickRowCount; r++) {
      const b = bricks[c][r];
      if (b.status === 1) {
        if (
          ballX > b.x && ballX < b.x + brickWidth &&
          ballY > b.y && ballY < b.y + brickHeight
        ) {
          ballDY = -ballDY;
          b.status = 0;
          hitSound.play();
          score += 10;
          document.getElementById("score").textContent = score;
          if (score > highScore) {
            highScore = score;
            localStorage.setItem("highScore", highScore);
            document.getElementById("highScore").textContent = highScore;
          }
        }
      }
    }
  }
}

function checkWin() {
  let allGone = true;
  for (let c = 0; c < brickColumnCount; c++) {
    for (let r = 0; r < brickRowCount; r++) {
      if (bricks[c][r].status === 1) {
        allGone = false;
        break;
      }
    }
  }
  if (allGone) {
    gameRunning = false;
    winSound.play();
    startButton.style.display = "inline-block";
  }
}

function drawBall() {
  ctx.beginPath();
  ctx.arc(ballX, ballY, ballRadius, 0, Math.PI * 2);
  ctx.fillStyle = "#fff";
  ctx.fill();
  ctx.closePath();
}
function drawPaddle() {
  ctx.beginPath();
  ctx.rect(paddleX, paddleY, paddleWidth, paddleHeight);
  ctx.fillStyle = "#888";
  ctx.fill();
  ctx.closePath();
}
function drawBricks() {
  for (let c = 0; c < brickColumnCount; c++) {
    for (let r = 0; r < brickRowCount; r++) {
      if (bricks[c][r].status === 1) {
        const brickX = c * (brickWidth + brickPadding) + brickOffsetLeft;
        const brickY = r * (brickHeight + brickPadding) + brickOffsetTop;
        bricks[c][r].x = brickX;
        bricks[c][r].y = brickY;
        ctx.beginPath();
        ctx.rect(brickX, brickY, brickWidth, brickHeight);
        ctx.fillStyle = "#800080";
        ctx.fill();
        ctx.closePath();
      }
    }
  }
}
function drawLogo() {
  ctx.font = "40px Arial";
  ctx.fillStyle = "#800080";
  ctx.fillText("MONAD¬Æ", canvas.width / 2 - 100, 280);
}
function draw() {
  if (!gameRunning) return;
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  drawBricks();
  drawBall();
  drawPaddle();
  drawLogo();
  collisionDetection();
  checkWin();

  ballX += ballDX;
  ballY += ballDY;

  if (ballX + ballRadius > canvas.width || ballX - ballRadius < 0) {
    ballDX = -ballDX;
  }
  if (ballY - ballRadius < 0) {
    ballDY = -ballDY;
  } else if (ballY + ballRadius > canvas.height) {
    gameRunning = false;
    loseSound.play();
    startButton.style.display = "inline-block";
    return;
  }

  if (
    ballY + ballRadius > paddleY &&
    ballX > paddleX && ballX < paddleX + paddleWidth
  ) {
    ballDY = -ballDY;
  }

  if (rightPressed && paddleX < canvas.width - paddleWidth) paddleX += paddleSpeed;
  else if (leftPressed && paddleX > 0) paddleX -= paddleSpeed;

  requestAnimationFrame(draw);
}

function restartGame() {
  ballX = canvas.width / 2;
  ballY = canvas.height / 2;
  ballDX = 4;
  ballDY = -4;
  paddleX = (canvas.width - paddleWidth) / 2;
  score = 0;
  document.getElementById("score").textContent = score;
  resetBricks();
  startButton.style.display = "none";
  gameRunning = true;
  draw();
}

draw();
</script>

</body>
</html>
